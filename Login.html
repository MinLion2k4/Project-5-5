<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Đăng Nhập</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="public/style.css" />
    <link rel="stylesheet" href="public/header.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    />
  </head>
  <body>
    <header>
      <!--Header Section-->
      <a href="index.html" class="logo"
        ><img src="assets/imgs/logo6.png" alt="" /> TUMTH</a
      >

      <nav class="navbar">
        <a href="index.html" class="active">Trang chủ</a>
        <a href="product2.html">Sản Phẩm</a>
        <a href="#">Tin tức</a>
        <a href="#">Liên Hệ</a>
      </nav>

      <div class="iconsH">
        <i class="fas fa-bars" id="menu-bars"></i>
        <i class="fas fa-search" id="sreach-icon"></i>
        <a href="#" class="fas fa-shopping-cart"></a>
        <a href="Login.html" class="fas fa-user"></a>
      </div>
    </header>
    <div class="main" style="background-image: url(assets/imgs/bg1.jpg)">
      <div class="container">
        <div class="form-box Login">
          <h2 class="Login">Login</h2>
          <form action="#">
            <div class="input-box">
              <span class="icon"><ion-icon name="mail"></ion-icon></span>
              <input
                type="email"
                id="lmail"
                style="text-transform: lowercase"
                required
              />
              <label>Email</label>
            </div>
            <div class="input-box">
              <span class="icon"><ion-icon name="key"></ion-icon></span>
              <input
                type="password"
                placeholder=""
                minlength="8"
                id="lpsw"
                required
              />
              <label>Password</label>
            </div>
            <div class="remember-fogot">
              <label
                ><input type="checkbox" id="lcheckbox" /> Remember me</label
              >
              <a href="#">Fogot Password?</a>
            </div>
            <button type="submit" class="btn" onclick="saveData1()">
              Login
            </button>
            <div class="login-register">
              <p>
                Don't have an account?
                <a href="#" class="register-link">Register</a>
              </p>
            </div>
          </form>
        </div>
        <div class="form-box Register">
          <h2 style="position: relative; top: 10px">Register</h2>
          <form action="#">
            <div class="input-box">
              <span class="icon"><ion-icon name="person"></ion-icon></span>
              <input type="text" id="user" minlength="3" required />
              <label>User</label>
            </div>
            <div class="input-box">
              <span class="icon"><ion-icon name="mail"></ion-icon></span>
              <input
                type="email"
                id="mail"
                placeholder=""
                style="text-transform: lowercase"
                required
              />
              <label>Email</label>
            </div>
            <div class="input-box">
              <span class="icon"><ion-icon name="key"></ion-icon></span>
              <input
                type="password"
                id="psw"
                minlength="8"
                placeholder=""
                required
              />
              <label>Password</label>
            </div>
            <div class="input-box" id="rps">
              <span class="icon"
                ><ion-icon name="close" style="width: 30px"></ion-icon
              ></span>
              <input
                type="password"
                id="re-psw"
                minlength="8"
                oninput="checkPasswordMatch()"
                placeholder=""
                required
              />
              <label>Re-Password</label>
            </div>
            <div class="remember-fogot">
              <label
                ><input type="checkbox" id="checkbox" /> Chấp thuận điều khoản
                sử dụng</label
              >
            </div>
            <button type="submit" onclick="saveData()" class="btn">
              Register
            </button>
            <div class="login-register">
              <p>
                Have another account? <a href="#" class="login-link">Login</a>
              </p>
            </div>
          </form>
        </div>
      </div>
    </div>
    <script src="public/script.js"></script>
    <script>
      function saveData1() {
        /*ham dang nhap*/
        event.preventDefault();
        let mail = document.getElementById("lmail").value;
        let psw = document.getElementById("lpsw").value;
        let checkbox = document.getElementById("lcheckbox");
        if (mail == "" || psw == "") {
          alert("Vui lòng điền đầy đủ thông tin");
          return;
        }
        let user_records = JSON.parse(localStorage.getItem("users"))
          ? JSON.parse(localStorage.getItem("users"))
          : [];
        let user = user_records.find((v) => v.mail == mail && v.psw == psw);
        if (user) {
          alert("Đăng nhập thành công");
          localStorage.setItem("user", JSON.stringify(user));
          if (user.admin) {
            window.location.href = "user/uhome.html";
          } else {
            window.location.href = "user/uhome.html";
          }
        } else {
          alert("Sai thông tin đăng nhập");
        }
      }
    </script>
    <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
    ></script>
  </body>
</html>
